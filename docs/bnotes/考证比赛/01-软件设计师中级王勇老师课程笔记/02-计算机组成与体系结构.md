---
title: 计算机组成与体系结构
date: 2024/07/02 12:18
categories:
  - 考证比赛
tags:
  - 软考
---
# 计算机组成与体系结构

课程内容提要

- 数据的表示
- 计算机结构
- Flynn分类法-对计算机类型分类
- CISC与RISC-计算机指令集
- 流水线技术
- 存储系统
- 总线系统
- 可靠性
- 校验码

## 数据的表示

### 进制的转换

略【微机原理】

### 原码反码补码移码

略【微机原理】

### 浮点数运算

**浮点数表示**
$$N=M*R^e$$
- M尾数
- e是指数
- R是基数

例如 $119 = 1.19 * 10^2$
- 1.19是尾数
- 2是指数
- 10是基数

**浮点数加减**

1. 对阶：将阶数大的阶数提出到尾数，使两数阶数相同
2. 尾数计算
3. 结果格式化

对阶

![](../../../public/img/2024/Pasted%20image%2020240701131219.png)
10^3 提一个10 到1.0，阶数基数相同，直接计算尾数

尾数计算: 10.0 + 1.19 =11.19

结果格式化

## CPU结构

![](../../../public/img/2024/Pasted%20image%2020240701131718.png)

## Flynn 分类法

指令流 | 数据流

| 体系结构类型            | 结构                            | 关键特性                | 代表                        |
| ----------------- | ----------------------------- | ------------------- | ------------------------- |
| 单指令流 \| 单数据流 SISD | 控制部分：1个<br>处理器：1个<br>主存模块：1个  |                     | 单处理器系统                    |
| 单指令流 \| 多数据流 SIMD | 控制部分：1个<br>处理器：多个个<br>主存模块：多个 | 各处理器以异步的形式执行同一条指令   | 并行处理机<br>阵列处理机<br>超级向量处理机 |
| 多指令流 \| 单数据流 MISD | 控制部分：多个<br>处理器：1个<br>主存模块：多个  | 被证明是不可能，至少是不实际的     | 目前没有，有文献称流水线计算机为此类        |
| 多指令流 \| 多数据流 MIMD | 控制部分：多个<br>处理器：多个<br>主存模块：多个  | 能够实现作业、任务、指令等各级全面并行 | 多处理机系统<br>多计算机            |

## CISC 与 RISC


| 指令系统类型   | 指令                                               | 寻址方式  | 实现方式                       | 其他            |
| -------- | ------------------------------------------------ | ----- | -------------------------- | ------------- |
| CISC(复杂) | 数量多，使用频率差别大，<br>可变长格式                            | 支持多种  | 微程序控制技术                    | 研制周期长         |
| RISC(精简) | 数量少，使用频率接近，定长格式，大部分为单周期指令，操作寄存器，只有Load/Store操作内存 | 支持方式少 | 增加了通用寄存器；硬布线逻辑控制为主；适合采用流水线 | 优化编译，有效支持高级语言 |


## 流水线

流水线是指在程序执行时多条指令重叠进行操作的一种准并行处理实现技术。各种部件同时处理是针对不同指令而言的，它们可同时为多条指令的不同部分进行工作，以提高各部件的利用率和指令的平均执行速度

![](../../../public/img/2024/Pasted%20image%2020240701181200.png)

### 流水线周期及流水线执行时间

流水线周期为执行时间最长的一段

流水线计算公式为：`1条指令的执行时间 +（指令条数-1）* 流水线周期 ` 

- 理论公式：$(t_1+t_2+...+t_k)+(n-1)*\Delta t$
- 实践公式：$(k+n-1) * \Delta t$
	- k：一条指令包括几个流水线周期。将第一条指令的各阶段周期看做流水线周期

![](../../../public/img/2024/Pasted%20image%2020240701181605.png)

![](../../../public/img/2024/Pasted%20image%2020240701231336.png)

例：若指令流水线把一条指令分为取指、分析和执行三部分，且三部分的时间分别是取指2ns，分析2ns，执行1ns。那么，流水线周期是多少？
100条指令全部执行完毕需要的时间是多少？

```
理论（2+2+1）+ (100-1)*2 = 203 ns
实践 (3+100-1)*2 = 204ns
```

### 流水线的吞吐率

流水线的吞吐率（Though Put rate, TP）是指在单位时间内流水线所完成的任务数量或输出的结果数量。

计算流水线吞吐率的最基本的公式如下

$$TP=\frac{指令条数}{流水线执行时间}$$

流水线最大吞吐率：

$$\lim_{x \to \infty} \frac{n}{(k+n-1)\Delta t} = \frac{1}{\Delta t}$$


### 流水线的加速比

完成同样一批任务，不使用流水线所用的时间与使用流水线所用的时间之比称为流水线的加速比。

计算流水线加速比的基本公式如下：

$$S=\frac{不使用流水线执行时间}{使用流水线执行时间}$$

### 流水线的效率

流水线的效率是指流水线的设备利用率。在时空图上，流水线的效率定义为n个任务
占用的时空区与k个流水段总的时空区之比。


计算流水线效率的公式为：

$$E=\frac{n个任务占用的时空区}{k个流水段的总的时空区}=\frac{T_0}{kT_k}$$

![](../../../public/img/2024/Pasted%20image%2020240702120221.png)

## 计算机层次化存储结构

![](../../../public/img/2024/Pasted%20image%2020240702122211.png)

### Cache

概念

- Cache的功能：提高CPU数据输入输出的速率，突破冯•诺依曼瓶颈，即CPU与存储系统间数据传送带宽限制。
- 在计算机的存储系统体系中，Cache是访问速度最快的层次。
- 使用Cache改善系统性能的依据是程序的局部性原理。

::: tip 使用“Cache+主存储器”的系统的平均周期
如果以 $h$ 代表对Cache的访问命中率，$t_1$ 表示Cache的周期时间，$t_2$ 表示主存储器周期
时间，以读操作为例，使用“Cache+主存储器”的系统的平均周期为 $t_3$，则：

$$t_3=h\times t_1+(1-h) \times t_2$$

其中，`(1-h)` 又称为失效率（未命中率）
:::

### 局部性原理

- 空间局部性：访问的内存位置在物理上邻近，一次访问后，其**附近的内存位置**很快也会被访问。
- 时间局部性：被访问过的内存位置或指令在**不久的将来**很可能再次被访问。
- 工作集理论：工作集是进程运行时被频繁访问的页面集合

例：

```cpp
    int i,j,s=0;
    for(i=1;i<1000;i++)
        for(j=1;j<1000;j++)
            s+=j;
    cout << s;
```


### 主存

分类

![](../../../public/img/2024/Pasted%20image%2020240702130357.png)

**1．随机存取存储器**

随机存取存储器，就是可以读出和写入的半导体存储器，简称RAM。CPU根据RAM的地址作随机地读取或写入操作，而存取操作所需的时间与信息存储位置是无关的。由于RAM的这个特点，在内存中RAM作为主体部分。根据RAM器件结构又可分为静态RAM和动态RAM两种。

1）静态RAM（Static RAM）
静态RAM存储器简称SRAM。这种存储器件的特点是存取速度很快，在不掉电的情况下，SRAM中的数据不会自动消失。SRAM采用多管的MOS器件构成，器件与微处理器的连接比较方便，但集成度较低且功耗较大。常见的SRAM有2114、6116、6264等。这类器件常在存储容量较少的系统中使用，如高速缓冲存储器（Cache）。

2）动态RAM（Dynamic RAM）
动态RAM存储器简称DRAM。这种存储器件在使用时，要求定期地进行刷新操作（Refresh）；否则，DRAM中的信息在2～8 ms后便自动消失。故需要增设额外的刷新电路，即重写电路。DRAM采用单管MOS构成，集成度高，功耗也很小。SRAM速度是DRAM的2～5倍，但SRAM价格比较贵。因此，微机的内存都用DRAM作为主要部件。常见的DRAM有2116、2118、6164、MN4164等。
另外，还有准静态RAM（Pseudo Static RAM），简称PSRAM。这是一种介于SRAM和DRAM之间的存储器件。

**2．只读存储器**

只读存储器简称ROM。特点是在系统运行时只能读取，不能写入，关闭电源后ROM中的信息不会丢失。因此，ROM被用于存放系统程序（如BIOS）和固化应用程序。这类存储器根据电路结构可分为以下几种。

（1）PROM：可编程ROM（Programmable ROM）。
将程序写入PROM后，就不可以再修改。

（2）EPROM：可擦除、可编程ROM（Erasable PROM）。
设计的程序写入后，可用紫外光照射擦除ROM中的内容，重新写入新的程序。

（3）E2 PROM：电可擦除、可编程ROM（Electrically Erasable PROM）。
被固化在该芯片中的程序，可以利用电压来擦除，重新写入新的程序。

性能

![](../../../public/img/2024/Pasted%20image%2020240702130851.png)


## 磁盘结构和参数

![](../../../public/img/2024/Pasted%20image%2020240702131914.png)

